[![File Server 1.0](https://github.com/overlapped/file-server/actions/workflows/cmake-single-platform.yml/badge.svg?branch=main)](https://github.com/overlapped/file-server/actions/workflows/cmake-single-platform.yml)

# Файловый сервер (тестовое задание)

> Необходимо разработать серверную компоненту, которая поддерживает до 10000 подключений к серверу по протоколу tcp.
> Каждый подключённый клиент после инициализации подключения забирает свой (разный) архив размером в 10 Гб.
> Время скачивания не важно, важно равномерное распределение нагрузки на каждого клиента.

## Текущая реализация обеспечивает

- Равномерное распределение нагрузки за счет динамической генерации файлов, (chunk 1Мб)
- Поддержка 10 000 одновременных подключений с надлежащим управлением ресурсами
- C++11, CMake
- Комплексное тестирование с Google Test
- Сравнительный анализ производительности с помощью Google Benchmark
- Модульная архитектура с четким разделением задач
- Правильная обработка ошибок и очистка ресурсов
- Потокобезопасные операции для высокой параллельности выполнения задач

## Возможные доработки

### Доработанная реализация возможно обеспечит

- Расширенный балансировщик нагрузки: реализовать алгоритм token-bucket с двойными ограничениями (chunks/sec и bytes/sec)
- Расчет предпочтительного распределения: динамическая настройка распределения полосы пропускания на основе количества активных подключенных клиентов
- Jain's Fairness Index: непрерывный мониторинг качества распределения нагрузки
- Принятие подключений с учетом нагрузки: отклонять новые подключения при высокой нагрузке для защиты существующих клиентов
- Равномерная нагрузка: каждое создание фрагмента файла имеет постоянную загрузку ЦП
- Мониторинг в реальном времени: непрерывная статистика и отчетность о текущей нагрузке
- Двойное ограничение: предотвращать как монополизацию полосы пропускания, так и захват слотов передачи

Реализация гарантирует, что все 10 000 клиентов получат свои уникальные файлы объемом 10 ГБ с практически равномерным
распределением полосы пропускания, предотвращая доминирование любого отдельного клиента над системными ресурсами и
поддерживая высокую общую пропускную способностью.

## Сборка проекта

```shell
mkdir build && cd build
cmake ..
cmake --build . -- -j$(nproc)
cmake --install .
```

## Запуск сервера

```shell
./file_server 8080
```

## Запуск клиента (в другом терминале)

```shell
./file_client 127.0.0.1 8080 my_download.bin
```

## Запуск тестов

```shell
./file_server_tests
./file_server_benchmarks
```
